<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://tei.oucs.ox.ac.uk/jenkins/job/TEIP5/lastSuccessfulBuild/artifact/release/xml/tei/odd/p5.nvdl" type="application/xml" schematypens="http://purl.oclc.org/dsdl/nvdl/ns/structure/1.0"?>

<div xmlns="http://www.tei-c.org/ns/1.0" xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
	xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:s="http://www.ascc.net/xml/schematron">
	<head>MEI extension</head>
	<byline>modelSpec and classSpec adopted from Raffaele Viglianti's <ref
		target="https://github.com/TEI-Music-SIG/tei-mei/blob/master/tei-lite_mei-cmn.xml"
		>tei-lite_mei-cmn.xml</ref></byline>
	<desc>Includes the TEI notatedMusic element and the MEI modules. Note: The moduleRefs below don't refer to the official mei-source.xml, but to a prefixed version, see <ref
		target="https://github.com/TEI-Music-SIG/tei-mei/"
		>https://github.com/TEI-Music-SIG/tei-mei/</ref></desc>
	<specGrp xml:id="extension.MEI">
			
		<!-- note: when odd2odd.xsl throws an error in the build process, it might be necessary to 1) replace the source attributes below by absolute paths, or 2) alternatively, copy mei-source.xml to odd2odd.xsl's folder (for example, file:/C:/Program%20Files/Oxygen%20XML%20Editor%2015/frameworks/tei/xml/tei/stylesheet/odds; don't delete the copy in your odd folder). -->
			
				<!-- figures modules -->
				<elementRef key="notatedMusic"/>
				
				<moduleRef key="MEI"
					source="mei-source.xml"/>
				<moduleRef key="MEI.shared"
					source="mei-source.xml"/>
				<!--                    <moduleRef key="MEI.header" source="mei-source.xml"/>-->
				<moduleRef key="MEI.cmn"
					source="mei-source.xml"/>
				<!--                    <moduleRef key="MEI.analysis" source="mei-source.xml"/>-->
				<moduleRef key="MEI.cmnOrnaments"
					source="mei-source.xml"/>
				<!--                    <moduleRef key="MEI.corpus" source="mei-source.xml"/>-->
				<moduleRef key="MEI.critapp"
					source="mei-source.xml"/>
				<moduleRef key="MEI.edittrans"
					source="mei-source.xml"/>
				<!--                    <moduleRef key="MEI.facsimile" source="mei-source.xml"/>-->
				<!--                    <moduleRef key="MEI.figtable" source="mei-source.xml"/>-->
				<!--                    <moduleRef key="MEI.frbr" source="mei-source.xml"/>-->
				<!--                    <moduleRef key="MEI.linkalign" source="mei-source.xml"/>-->
				<moduleRef key="MEI.lyrics"
					source="mei-source.xml"/>
				<!--                    <moduleRef key="MEI.namesdates" source="mei-source.xml"/>-->
				<!--                    <moduleRef key="MEI.ptrref" source="mei-source.xml"/>-->
				<!--                    <moduleRef key="MEI.text" source="mei-source.xml"/>-->
				<moduleRef key="MEI.usersymbols"
					source="mei-source.xml"/>
				
				<elementSpec xmlns="http://www.tei-c.org/ns/1.0" module="figures"
					ident="notatedMusic" mode="change">
					<equiv/>
					<desc versionDate="2014-02-04" xml:lang="en">encodes the presence of music notation in a text. Some MEI elements are allowed within.</desc>
					<classes>
						<memberOf key="model.global"/>
						<memberOf key="att.global"/>
						<memberOf key="att.placement"/>
						<memberOf key="att.typed"/>
					</classes>
					<content>
						<zeroOrMore xmlns="http://relaxng.org/ns/structure/1.0">
							<choice>
								<ref name="model.labelLike"/>
								<ref name="model.ptrLike"/>
								<ref name="graphic"/>
								<ref name="binaryObject"/>
							</choice>
						</zeroOrMore>
						<rng:optional>
							<rng:choice>
								<rng:ref name="mei"/>
								<rng:ref name="music"/>
								<rng:ref name="mdiv"/>
								<rng:ref name="layer"/>
							</rng:choice>
						</rng:optional>
					</content>
					<remarks versionDate="2014-02-04" xml:lang="en">
						<p>It is possible to describe
                            the content of the notation using elements from the model.labelLike class and it is possible
                            to point to an external representation using elements from model.ptrLike. It is possible to
                            specify the location of digital objects representing the notated music in other media such
                            as images or audio-visual files. The encoder's interpretation of the correspondence between
                            the notated music and these digital objects is not encoded explicitly. We recommend the use
                            of graphic and binaryObject mainly as a fallback mechanism when the notated music format is
                            not displayable by the application using the encoding. The alignment of encoded notated
                            music, images carrying the notation, and audio files is a complex matter for which we refer
                            the encoder to other formats and specifications such as MPEG-SMR.</p>
						<p>In this TEI with Music Notation customisation, some
                                elements from MEI are allowed to occur within the element to
                                encode the music notation.</p>
					</remarks>
					
				</elementSpec>
				
				<!-- Changes to MEI components -->
				
				<!-- Make @source mandatory when applicable. -->
				<classSpec type="atts" module="MEI.shared" ident="mei_att.staffident"
					mode="replace">
					<desc versionDate="2014-02-04" xml:lang="en">signifies the staff on which a notated event occurs or to
						which a control event applies.</desc>
					<attList>
						<attDef ident="staff" usage="mwa">
							<datatype>
								<rng:ref name="string"/>
							</datatype>
						</attDef>
					</attList>
					<remarks versionDate="2014-02-04" xml:lang="en">
						<p>The attribute is made mandatory when applicable instead of always mandatory to allow MEI fragments.</p>
					</remarks>
				</classSpec>
	</specGrp>
		</div>